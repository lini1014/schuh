generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  previewFeatures = ["nativeDistinct", "relationJoins"]
  engineType      = "client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["schuh"]
}

model Abbildung {
  id           Int    @id @default(autoincrement())
  beschriftung String
  contentType  String @map("content_type")
  schuhId      Int    @map("schuh_id")
  schuh        Schuh  @relation(fields: [schuhId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([schuhId])
  @@map("abbildung")
  @@schema("schuh")
}

model Modell {
  id      Int     @id @default(autoincrement())
  modell  String
  farbe   String?
  schuhId Int     @unique @map("schuh_id")
  schuh   Schuh   @relation(fields: [schuhId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("modell")
  @@schema("schuh")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model Schuh {
  id                Int         @id @default(autoincrement())
  version           Int         @default(0)
  artikelnummer     String      @unique
  bewertung         Int
  typ               Schuhtyp?
  preis             Decimal     @db.Decimal(8, 2)
  rabattsatz        Decimal     @db.Decimal(4, 3)
  verfuegbar        Boolean     @default(false)
  erscheinungsdatum DateTime?   @db.Date
  homepage          String?
  schlagwoerter     Json?
  erstellt_am       DateTime    @default(now()) @db.Timestamp(6)
  aktualisiert_am   DateTime    @default(now()) @updatedAt @db.Timestamp(6)
  abbildungen       Abbildung[]
  modell            Modell?
  schuhFile         SchuhFile?

  @@map("schuh")
  @@schema("schuh")
}

model SchuhFile {
  id       Int     @id @default(autoincrement())
  data     Bytes
  filename String
  mimetype String?
  schuhId  Int     @unique @map("schuh_id")
  schuh    Schuh   @relation(fields: [schuhId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([schuhId])
  @@map("schuh_file")
  @@schema("schuh")
}

enum Schuhtyp {
  Sneaker
  Laufschuh
  Freizeitschuh
  Skateschuh
  Tennisschuh

  @@map("schuhtyp")
  @@schema("schuh")
}
